<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black & White - Tile Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #2d5016;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: transparent;
            border-radius: 0;
            padding: 20px 10px;
            box-shadow: none;
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #fff;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .score-board {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
        }

        .score {
            color: #fff;
            font-size: 20px;
            font-weight: bold;
        }

        .score span {
            color: #ffd700;
            font-size: 28px;
        }

        .round-display {
            text-align: center;
        }

        @media (max-width: 768px) {
            .score-board {
                margin-bottom: 15px;
                padding: 8px;
            }

            .score {
                font-size: 18px;
            }

            .score span {
                font-size: 24px;
            }
        }

        .player-area {
            margin: 15px 0;
        }

        .player-header {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 10px;
            padding: 0 5px;
            gap: 8px;
        }

        .player-label {
            color: #fff;
            font-size: 18px;
            font-weight: bold;
        }

        .player-score {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .player-label {
                font-size: 16px;
            }

            .player-score {
                font-size: 16px;
            }
        }

        .tiles-container {
            display: flex;
            gap: 10px;
            flex-wrap: nowrap;
            justify-content: center;
            min-height: 80px;
        }

        .tile {
            width: 60px;
            height: 80px;
            flex-shrink: 1;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 768px) {
            .tiles-container {
                gap: 4px;
            }

            .tile {
                width: 40px;
                height: 55px;
                font-size: 22px;
                border: 2px solid rgba(255, 255, 255, 0.2);
            }
        }

        @media (max-width: 480px) {
            .tiles-container {
                gap: 2px;
            }

            .tile {
                width: 32px;
                height: 48px;
                font-size: 18px;
            }
        }

        .tile:hover:not(.used) {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }

        .tile.black {
            background: linear-gradient(145deg, #2c2c2c, #000);
            color: #fff;
        }

        .tile.white {
            background: linear-gradient(145deg, #fff, #d0d0d0);
            color: #000;
        }

        .tile.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .tile.cpu-tile {
            background: linear-gradient(145deg, #4a4a4a, #2a2a2a);
            color: transparent;
        }

        .tile.cpu-tile.black {
            background: linear-gradient(145deg, #2c2c2c, #000);
        }

        .tile.cpu-tile.white {
            background: linear-gradient(145deg, #fff, #d0d0d0);
        }

        .middle-area {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .played-tiles {
            display: flex;
            gap: 40px;
            margin-bottom: 10px;
        }

        .played-tile {
            width: 60px;
            height: 80px;
            border-radius: 8px;
            background: linear-gradient(145deg, #8B4513, #654321);
            border: 3px solid #D2691E;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .message {
            color: #fff;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            min-height: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin: 5px 0;
        }

        .round-info {
            color: #ffd700;
            font-size: 16px;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .middle-area {
                padding: 15px;
                margin: 10px 0;
                min-height: 130px;
            }

            .message {
                font-size: 18px;
            }
        }

        button {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Black & White</h1>
        
        <div class="score-board">
            <div class="score round-display">Round: <span id="round">1</span> / 9</div>
        </div>

        <div class="player-area">
            <div class="player-header">
                <div class="player-label">Player 2 (CPU):</div>
                <div class="player-score" id="cpu-score">0</div>
            </div>
            <div class="tiles-container" id="cpu-tiles"></div>
        </div>

        <div class="middle-area">
            <div class="round-info" id="round-info">Choose a tile to play</div>
            <div class="played-tiles" id="played-tiles"></div>
            <div class="message" id="message"></div>
        </div>

        <div class="player-area">
            <div class="player-header">
                <div class="player-label">Player 1 (You):</div>
                <div class="player-score" id="player-score">0</div>
            </div>
            <div class="tiles-container" id="player-tiles"></div>
        </div>

        <div style="text-align: center;">
            <button id="new-game" onclick="initGame()">New Game</button>
        </div>
    </div>

    <script>
        let playerTiles = [];
        let cpuTiles = [];
        let playerScore = 0;
        let cpuScore = 0;
        let currentRound = 1;
        let playerSelectedTile = null;
        let cpuSelectedTile = null;
        let usedPlayerTiles = [];
        let usedCpuTiles = [];
        let playerGoesFirst = true; // Player 1 starts the game
        let waitingForPlayer = true;

        function initGame() {
            // Initialize tiles (0-8, even=black, odd=white)
            playerTiles = [0, 1, 2, 3, 4, 5, 6, 7, 8];
            cpuTiles = [0, 1, 2, 3, 4, 5, 6, 7, 8];
            
            // Shuffle CPU tiles
            cpuTiles = shuffleArray(cpuTiles);
            
            // Reset game state
            playerScore = 0;
            cpuScore = 0;
            currentRound = 1;
            playerSelectedTile = null;
            cpuSelectedTile = null;
            usedPlayerTiles = [];
            usedCpuTiles = [];
            playerGoesFirst = true; // Player 1 always starts first round
            waitingForPlayer = true;
            
            // Update display
            updateScoreBoard();
            renderTiles();
            clearMiddleArea();
            document.getElementById('message').textContent = '';
            updateRoundInfo();
            
            // If CPU goes first, start their turn
            if (!playerGoesFirst) {
                cpuPlayTile();
            }
        }

        function shuffleArray(array) {
            let newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function updateRoundInfo() {
            if (waitingForPlayer) {
                document.getElementById('round-info').textContent = 'Your turn - Choose a tile to play';
            } else {
                document.getElementById('round-info').textContent = 'CPU\'s turn...';
            }
        }

        function cpuPlayTile() {
            waitingForPlayer = false;
            updateRoundInfo();
            
            setTimeout(() => {
                // CPU randomly selects an available tile
                let availableTiles = cpuTiles.filter(t => !usedCpuTiles.includes(t));
                let cpuTile = availableTiles[Math.floor(Math.random() * availableTiles.length)];
                
                cpuSelectedTile = cpuTile;
                usedCpuTiles.push(cpuTile);
                renderTiles();
                
                // Show CPU's tile color in the middle
                showSingleTile('cpu');
                
                // Now wait for player
                waitingForPlayer = true;
                updateRoundInfo();
            }, 800);
        }

        function renderTiles() {
            const playerContainer = document.getElementById('player-tiles');
            const cpuContainer = document.getElementById('cpu-tiles');
            
            playerContainer.innerHTML = '';
            cpuContainer.innerHTML = '';
            
            // Render player tiles
            playerTiles.forEach(tile => {
                const tileElement = document.createElement('div');
                tileElement.className = `tile ${tile % 2 === 0 ? 'black' : 'white'}`;
                if (usedPlayerTiles.includes(tile)) {
                    tileElement.classList.add('used');
                }
                tileElement.textContent = tile;
                tileElement.onclick = () => selectPlayerTile(tile);
                playerContainer.appendChild(tileElement);
            });
            
            // Render CPU tiles (showing only color, not numbers)
            cpuTiles.forEach(tile => {
                const tileElement = document.createElement('div');
                tileElement.className = `tile cpu-tile ${tile % 2 === 0 ? 'black' : 'white'}`;
                if (usedCpuTiles.includes(tile)) {
                    tileElement.classList.add('used');
                }
                cpuContainer.appendChild(tileElement);
            });
        }

        function selectPlayerTile(tile) {
            if (usedPlayerTiles.includes(tile) || playerSelectedTile !== null || !waitingForPlayer) {
                return;
            }
            
            playerSelectedTile = tile;
            usedPlayerTiles.push(tile);
            renderTiles();
            
            // If player went first, CPU needs to play
            if (playerGoesFirst && cpuSelectedTile === null) {
                // Show player's tile color in the middle
                showSingleTile('player');
                document.getElementById('round-info').textContent = 'CPU is thinking...';
                
                setTimeout(() => {
                    // CPU randomly selects an available tile
                    let availableTiles = cpuTiles.filter(t => !usedCpuTiles.includes(t));
                    let cpuTile = availableTiles[Math.floor(Math.random() * availableTiles.length)];
                    
                    cpuSelectedTile = cpuTile;
                    usedCpuTiles.push(cpuTile);
                    
                    // Show both played tiles with colors
                    showPlayedTiles();
                    
                    // Determine winner after user can see the colors
                    setTimeout(() => {
                        determineRoundWinner();
                    }, 1500);
                }, 800);
            } else {
                // Player went second, both tiles are now played
                showPlayedTiles();
                
                // Determine winner after user can see the colors
                setTimeout(() => {
                    determineRoundWinner();
                }, 1500);
            }
        }

        function showPlayedTiles() {
            const playedTilesContainer = document.getElementById('played-tiles');
            playedTilesContainer.innerHTML = '';
            
            // Create container for CPU tile
            const cpuContainer = document.createElement('div');
            cpuContainer.style.textAlign = 'center';
            
            const cpuLabel = document.createElement('div');
            cpuLabel.textContent = 'Player 2';
            cpuLabel.style.color = '#ffd700';
            cpuLabel.style.fontSize = '14px';
            cpuLabel.style.marginBottom = '5px';
            
            const cpuPlayedTile = document.createElement('div');
            cpuPlayedTile.className = `tile ${cpuSelectedTile % 2 === 0 ? 'black' : 'white'}`;
            cpuPlayedTile.style.margin = '0 auto';
            
            cpuContainer.appendChild(cpuLabel);
            cpuContainer.appendChild(cpuPlayedTile);
            
            // Create container for Player tile
            const playerContainer = document.createElement('div');
            playerContainer.style.textAlign = 'center';
            
            const playerLabel = document.createElement('div');
            playerLabel.textContent = 'Player 1';
            playerLabel.style.color = '#ffd700';
            playerLabel.style.fontSize = '14px';
            playerLabel.style.marginBottom = '5px';
            
            const playerPlayedTile = document.createElement('div');
            playerPlayedTile.className = `tile ${playerSelectedTile % 2 === 0 ? 'black' : 'white'}`;
            playerPlayedTile.style.margin = '0 auto';
            
            playerContainer.appendChild(playerLabel);
            playerContainer.appendChild(playerPlayedTile);
            
            playedTilesContainer.appendChild(cpuContainer);
            playedTilesContainer.appendChild(playerContainer);
            
            document.getElementById('round-info').textContent = 'Comparing tiles...';
        }

        function showSingleTile(whichPlayer) {
            const playedTilesContainer = document.getElementById('played-tiles');
            playedTilesContainer.innerHTML = '';
            
            const container = document.createElement('div');
            container.style.textAlign = 'center';
            
            const label = document.createElement('div');
            label.textContent = whichPlayer === 'player' ? 'Player 1' : 'Player 2';
            label.style.color = '#ffd700';
            label.style.fontSize = '14px';
            label.style.marginBottom = '5px';
            
            const playedTile = document.createElement('div');
            const tileValue = whichPlayer === 'player' ? playerSelectedTile : cpuSelectedTile;
            playedTile.className = `tile ${tileValue % 2 === 0 ? 'black' : 'white'}`;
            playedTile.style.margin = '0 auto';
            
            container.appendChild(label);
            container.appendChild(playedTile);
            playedTilesContainer.appendChild(container);
        }

        function determineRoundWinner() {
            const messageElement = document.getElementById('message');
            let roundWinner = null; // 'player', 'cpu', or 'tie'
            
            if (playerSelectedTile > cpuSelectedTile) {
                playerScore++;
                messageElement.textContent = 'You win this round!';
                messageElement.style.color = '#4CAF50';
                roundWinner = 'player';
            } else if (cpuSelectedTile > playerSelectedTile) {
                cpuScore++;
                messageElement.textContent = 'CPU wins this round!';
                messageElement.style.color = '#f44336';
                roundWinner = 'cpu';
            } else {
                messageElement.textContent = 'This round is a tie!';
                messageElement.style.color = '#ffd700';
                roundWinner = 'tie';
            }
            
            updateScoreBoard();
            renderTiles();
            
            // Move to next round or end game
            setTimeout(() => {
                if (currentRound >= 9) {
                    endGame();
                } else {
                    // Determine who goes first next round
                    if (roundWinner === 'player') {
                        playerGoesFirst = true;
                    } else if (roundWinner === 'cpu') {
                        playerGoesFirst = false;
                    }
                    // If tie, whoever went first this round goes first next round (playerGoesFirst stays the same)
                    
                    currentRound++;
                    playerSelectedTile = null;
                    cpuSelectedTile = null;
                    clearMiddleArea();
                    updateScoreBoard();
                    
                    // Start next round
                    if (playerGoesFirst) {
                        waitingForPlayer = true;
                        updateRoundInfo();
                    } else {
                        cpuPlayTile();
                    }
                }
            }, 2000);
        }

        function clearMiddleArea() {
            document.getElementById('played-tiles').innerHTML = '';
            document.getElementById('message').textContent = '';
        }

        function updateScoreBoard() {
            document.getElementById('player-score').textContent = playerScore;
            document.getElementById('cpu-score').textContent = cpuScore;
            document.getElementById('round').textContent = currentRound;
        }

        function endGame() {
            const middleArea = document.getElementById('played-tiles').parentElement;
            const playedTiles = document.getElementById('played-tiles');
            const message = document.getElementById('message');
            const roundInfo = document.getElementById('round-info');
            
            playedTiles.innerHTML = '';
            
            let resultText = '';
            let resultColor = '';
            if (playerScore > cpuScore) {
                resultText = 'üéâ You Win! üéâ';
                resultColor = '#4CAF50';
            } else if (cpuScore > playerScore) {
                resultText = 'üòî CPU Wins!';
                resultColor = '#f44336';
            } else {
                resultText = 'ü§ù It\'s a Tie!';
                resultColor = '#ffd700';
            }
            
            roundInfo.textContent = 'Game Over!';
            message.innerHTML = `
                <div style="font-size: 32px; color: ${resultColor}; margin-bottom: 15px;">
                    ${resultText}
                </div>
                <div style="font-size: 24px; color: #ffd700;">
                    Final Score: ${playerScore} - ${cpuScore}
                </div>
            `;
        }

        // Initialize game on load
        initGame();
    </script>
</body>
</html>
